<section class="content-header">
    <h1>
        @TextosPaginas.Home_Foto

    </h1>
    <ol class="breadcrumb">

        <li>@TextosPaginas.Home_Menu</li>
        <li class="active">@TextosPaginas.Home_Foto</li>
    </ol>

</section>
<!-- Main content -->
<section class="content" ng-init="itemFoto.load()">
    <!-- Default box -->
    <!-- general form elements -->
    <div class="box box-primary">
        <div class="overlay" ng-show="itemFoto.loading">
            <i class="fa fa-refresh fa-spin text-gray"></i>
        </div>

        <div class="box collapsed-box">
            <div class="box-header with-border">
                <h3 class="box-title"><i class="fa fa-filter"></i>&nbsp;@TextosPaginas.Foto_Filtros</h3>

                <div class="box-tools pull-right">
                    <button class="btn btn-box-tool" data-widget="collapse" data-toggle="tooltip" title="Collapse"><i class="fa fa-plus"></i></button>
                </div>
            </div>
            <div class="box-body">
                <div class="row">
                    <div class="form-group col-md-6">
                        <label>@TextosPaginas.Foto_IdentificadorCidade</label>
                        <select ng-model="itemFoto.itemCidade" class="form-control" ng-options="obj.Nome for obj in itemFoto.ListaCidades track by obj.Identificador">
                            <option value="">@TextosPaginas.Selecione</option>
                        </select>
                    </div>
                    <div class="form-group col-md-6">
                        <label>@TextosPaginas.Foto_Comentario</label>
                        <input type="text" class="form-control" ng-model="itemFoto.filtro.Comentario" maxlength="200" empty-to-null>
                    </div>
                    <div class="form-group col-md-6">
                        <label>@TextosPaginas.Foto_DataDe</label>
                        <div class="dropdown">
                            <a class="dropdown-toggle" role="button" data-toggle="dropdown">
                                <div class="input-group">
                                    <input date-input ng-model="itemFoto.filtro.DataInicioDe" class="form-control" input-mask="{mask: 'd/m/y'}"
                                           datapattern="dd/MM/yyyy">
                                    <span class="input-group-addon">
                                        <i class="glyphicon glyphicon-calendar"></i>
                                    </span>
                                </div>
                            </a>
                            <ul class="dropdown-menu" role="menu" aria-labelledby="dLabel">
                                <datetimepicker data-ng-model="itemFoto.filtro.DataInicioDe"
                                                data-datetimepicker-config="{  minView:'day' , langCode:itemFoto.Idioma()  }" />
                            </ul>
                        </div>
                    </div>
                    <div class="form-group col-md-6">
                        <label>@TextosPaginas.Foto_DataAte</label>
                        <div class="dropdown">
                            <a class="dropdown-toggle" role="button" data-toggle="dropdown">
                                <div class="input-group">
                                    <input date-input ng-model="itemFoto.filtro.DataInicioAte" class="form-control" input-mask="{mask: 'd/m/y'}"
                                           datapattern="dd/MM/yyyy">
                                    <span class="input-group-addon">
                                        <i class="glyphicon glyphicon-calendar"></i>
                                    </span>
                                </div>
                            </a>
                            <ul class="dropdown-menu" role="menu" aria-labelledby="dLabel">
                                <datetimepicker data-ng-model="itemFoto.filtro.DataInicioAte"
                                                data-datetimepicker-config="{  minView:'day' , langCode:itemFoto.Idioma()  }" />
                            </ul>
                        </div>
                    </div>
                </div>
                <div class="row" style="max-height:140px">
                    <div class="col-md-4">
                        <div class="panel panel-default">
                            <div class="panel-heading">
                                @TextosPaginas.Foto_Atracao
                            </div>
                            <!-- /.panel-heading -->
                            <div style="padding-left:15px;padding-right:15px">
                                <div class="row">
                                    <div ng-repeat="ano in itemFoto.filtro.Atracoes" ng-class="{ 'label-primary': ano.Selecionado}" ng-click="itemFoto.AlterarSelecao(ano);" style="text-align:center; cursor:pointer">
                                        {{ano.Nome}} - {{ano.Chegada | date:'dd/MM/yyyy HH:mm'}}
                                    </div>
                                </div>
                            </div>
                            <!-- /.panel-body -->

                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="panel panel-default">
                            <div class="panel-heading">
                                @TextosPaginas.Foto_Hotel
                            </div>
                            <!-- /.panel-heading -->
                            <div style="padding-left:15px;padding-right:15px">
                                <div class="row">
                                    <div ng-repeat="ano in itemFoto.filtro.Hoteis" ng-class="{ 'label-primary': ano.Selecionado}" ng-click="itemFoto.AlterarSelecao(ano);" style="text-align:center; cursor:pointer">
                                        {{ano.Nome}}
                                    </div>
                                </div>
                            </div>
                            <!-- /.panel-body -->

                        </div>
                    </div>

                    <div class="col-md-4">
                        <div class="panel panel-default">
                            <div class="panel-heading">
                                @TextosPaginas.Foto_Refeicao
                            </div>
                            <!-- /.panel-heading -->
                            <div style="padding-left:15px;padding-right:15px">
                                <div class="row">
                                    <div ng-repeat="ano in itemFoto.filtro.Refeicoes" ng-class="{ 'label-primary': ano.Selecionado}" ng-click="itemFoto.AlterarSelecao(ano);" style="text-align:center; cursor:pointer">
                                        {{ano.Nome}} - {{ano.Data | date:'dd/MM/yyyy HH:mm'}}
                                    </div>
                                </div>
                            </div>
                            <!-- /.panel-body -->

                        </div>
                    </div>
                </div>




            </div><!-- /.box-body -->
            <div class="box-footer">

                <button type="file" class="btn btn-primary" multiple ngf-select="itemFoto.CarregarArquivos($files)">
                    <span class="fa fa-upload" aria-hidden="true"></span>
                </button>
                <button class="btn btn-primary  pull-right" ng-click="itemFoto.filtraDado()">
                    <span class="fa fa-search" aria-hidden="true"></span> @TextosPaginas.Pesquisar
                </button>

            </div>
        </div>


        <div class="box collapsed-box">
            <div class="box-header with-border">
                <h3 class="box-title"><i class="fa fa-upload"></i>&nbsp;@TextosPaginas.Foto_Uploads</h3>

                <div class="box-tools pull-right">
                    <button class="btn btn-box-tool" data-widget="collapse" data-toggle="tooltip" title="Collapse"><i class="fa fa-plus"></i></button>
                </div>
            </div>
            <div class="box-body">
                <table class="table-condensed table-striped">
                    <thead>
                        <tr>
                            <th class="col-xs-3">
                                @TextosPaginas.Foto_NomeArquivo
                            </th>
                            <th class="col-xs-2">
                                @TextosPaginas.Foto_Porcentual
                            </th>
                            <th class="col-xs-6">
                                @TextosPaginas.Foto_Situacao
                            </th>
                            <th class="col-xs-1">

                            </th>
                        </tr>
                    </thead>
                    <tr ng-repeat='item in itemFoto.ListaArquivos' ng-class="{'success': item.CodigoSituacao==1,'warning': item.CodigoSituacao==2}">
                        <td>
                            {{item.FileName}}
                        </td>
                        <td>
                            {{item.Porcentual}}
                        </td>
                        <td>
                            {{item.Situacao}}
                        </td>
                        <td>
                            <button type="button" class="btn btn-danger small" ng-click="itemFoto.RemoverUpload(item)"><span class="fa fa-close" aria-hidden="true"></span></button>

                        </td>
                    </tr>
                </table>


            </div><!-- /.box-body -->

        </div>
    </div><!-- /.box -->
    <div class="box box-primary">
        <div class="overlay" ng-show="itemFoto.loading">
            <i class="fa fa-refresh fa-spin text-gray"></i>
        </div>
        <div class="dropzone col-lg-12" file-dropzone="[image/png, image/jpeg, image/gif]"
             on-file-uploaded="itemFoto.CarregarArquivo(item)">
            <div class="row">
               
                        <div ng-repeat='item in itemFoto.ListaDados' class="col-lg-2 col-md-4" style="height:120px;cursor:pointer">
                            <img ng-if="item.LinkThumbnail" ng-src="{{item.LinkThumbnail || trustAsResourceUrl}}" style="max-height:80px; width:100%" ng-click="itemFoto.AbrirJanelaEdicao(item)" />
                            <span>{{item.Comentario}} </span><br />
                            <div class="bootstrap-tagsinput">

                                <span ng-repeat="ano in item.Atracoes" class="tag label label-primary" ng-if="!ano.DataExclusao">{{ano.ItemAtracao.Nome}}</span>
                                <span ng-repeat="ano in item.Hoteis" class="tag label label-success" ng-if="!ano.DataExclusao">{{ano.ItemHotel.Nome}}</span>
                                <span ng-repeat="ano in item.Refeicoes" class="tag label label-warning" ng-if="!ano.DataExclusao">{{ano.ItemRefeicao.Nome}}</span>
                          
                            </div>
                        </div>
                   

            </div>
            <div on-view-point on-visible="itemFoto.ProximaPagina()" enabled="itemFoto.enableScroll" end-of-page="itemFoto.FimPagina" id="fimPagina">
            </div>
        </div>
    </div>


    <script type="text/ng-template" id="editaImagem.html">

        <div class="modal-header">
            <span>@TextosPaginas.Foto_EditaMidia</span>
        </div>
        <div class="modal-body" ng-init="vmEdit.load()">
            <div class="box box-primary">
                <div class="box-body">
                    <div class="row" ng-show="vmEdit.messages.length > 0">
                        <div class="col-md-12">
                            <div class="callout callout-danger">
                                <h4>@TextosPaginas.Geral_ValidarErros</h4>
                                <ul>
                                    <li ng-repeat="erro in vmEdit.messages">
                                        <span ng-bind="erro.Mensagem"></span>
                                    </li>
                                </ul>

                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="form-group  col-md-12" ng-class="{ 'has-error': vmEdit.CamposInvalidos.Comentario }">
                            <label>@TextosPaginas.Foto_Comentario</label>
                            <input type="text" class="form-control" ng-model="vmEdit.itemFoto.Comentario" empty-to-null>
                        </div>

                    </div>
                    <div class="row">
                        <div class="form-group col-md-6" ng-class="{ 'has-error': vmEdit.CamposInvalidos.Data }">
                            <label for="txtDataInicio">@TextosPaginas.Foto_Data</label>
                            <div class="dropdown">
                                <a class="dropdown-toggle" id="A1" role="button" data-toggle="dropdown">
                                    <div class="input-group">
                                        <input date-input ng-model="vmEdit.itemFoto.Data" class="form-control" input-mask="{mask: 'd/m/y'}"
                                               datapattern="dd/MM/yyyy">
                                        <span class="input-group-addon">
                                            <i class="glyphicon glyphicon-calendar"></i>
                                        </span>
                                    </div>
                                </a>
                                <ul class="dropdown-menu" role="menu" aria-labelledby="dLabel">
                                    <datetimepicker data-ng-model="vmEdit.itemFoto.Data"
                                                    data-datetimepicker-config="{  minView:'day', langCode: vmEdit.Idioma() }" />
                                </ul>
                            </div>
                        </div>
                        <div class="form-group col-md-6">
                            <label for="txtDataInicio">@TextosPaginas.Foto_Hora</label>
                            <input type="text" class="form-control" name="txtHorario" id="txtHorario" ng-model="vmEdit.itemFoto.strHora"  input-mask="{mask: 'h:s:s'}" empty-to-null>

                        </div>
                    </div>

                    <div class="row" style="max-height:140px">
                        <div class="col-md-6">
                            <div class="panel panel-default">
                                <div class="panel-heading">
                                    @TextosPaginas.Foto_Atracao
                                </div>
                                <!-- /.panel-heading -->
                                <div style="padding-left:15px;padding-right:15px">
                                    <div class="row">
                                        <div ng-repeat="ano in vmEdit.itemFoto.ListaAtracao" ng-class="{ 'label-primary': ano.Selecionado}" ng-click="vmEdit.AlterarSelecaoAtracao(ano);" style="text-align:center; cursor:pointer">
                                            {{ano.Nome}} - {{ano.Chegada | date:'dd/MM/yyyy HH:mm'}}
                                        </div>
                                    </div>
                                </div>
                                <!-- /.panel-body -->

                            </div>
                        </div>

                        <div class="col-md-6">
                            <div class="panel panel-default">
                                <div class="panel-heading">
                                    @TextosPaginas.Foto_Hotel
                                </div>
                                <!-- /.panel-heading -->
                                <div style="padding-left:15px;padding-right:15px">
                                    <div class="row">
                                        <div ng-repeat="ano in vmEdit.itemFoto.ListaHotel" ng-class="{ 'label-primary': ano.Selecionado}" ng-click="vmEdit.AlterarSelecaoHotel(ano);" style="text-align:center; cursor:pointer">
                                            {{ano.Nome}}
                                        </div>
                                    </div>
                                </div>
                                <!-- /.panel-body -->

                            </div>
                        </div>

                        <div class="col-md-6">
                            <div class="panel panel-default">
                                <div class="panel-heading">
                                    @TextosPaginas.Foto_Refeicao
                                </div>
                                <!-- /.panel-heading -->
                                <div style="padding-left:15px;padding-right:15px">
                                    <div class="row">
                                        <div ng-repeat="ano in vmEdit.itemFoto.ListaRefeicao" ng-class="{ 'label-primary': ano.Selecionado}" ng-click="vmEdit.AlterarSelecaoRefeicao(ano);" style="text-align:center; cursor:pointer">
                                            {{ano.Nome}} - {{ano.Data | date:'dd/MM/yyyy HH:mm'}}
                                        </div>
                                    </div>
                                </div>
                                <!-- /.panel-body -->

                            </div>
                        </div>

                        
                    </div>


                </div>
            </div>
        </div>
        <div class="modal-footer">
            <button type="button" class="btn btn-primary" ng-click="vmEdit.abrirMapa()">
                <span class="fa fa-map-marker" aria-hidden="true">@TextosPaginas.Posicao</span>
            </button>
            <button type="button" class="btn btn-primary" ng-click="vmEdit.close()">
                <span class="fa fa-close" aria-hidden="true">@TextosPaginas.Cancelar</span>
            </button>
            <button type="button" class="btn btn-primary" ng-click="vmEdit.Excluir()">
                <span class="fa fa-trash" aria-hidden="true">@TextosPaginas.Excluir</span>
            </button>
            <button type="button" class="btn btn-primary  pull-right" ng-click="vmEdit.salvar()">
                <span class="fa fa-cloud-upload" aria-hidden="true"></span> @TextosPaginas.Geral_Salvar
            </button>
        </div>
    </script>

    <script type="text/ng-template" id="modalDelete.html">
        <div class="modal-header">
            <span>@TextosPaginas.ConfirmaExclusao</span>
        </div>
        <div class="modal-body">
            <button type="button" class="btn btn-info btn-lg btn-block" ng-click="vmDelete.delete()">@TextosPaginas.Sim</button>
            <button type="button" class="btn btn-default btn-lg btn-block" ng-click="vmDelete.close()">@TextosPaginas.Nao</button>
        </div>
        <div class="modal-footer hidden-lg hidden-md">
            <button type="button" class="btn btn-default btn-lg btn-block" ng-click="vmDelete.back()">@TextosPaginas.Voltar</button>
        </div>
    </script>


    <script type="text/ng-template" id="modalMapa.html">
        <div class="modal-body">
            <div class="box-body">

                <div class="row">
                    <div class="form-group  col-sm-8">
                        <label>@TextosPaginas.Posicao_Endereco</label>
                        <input places-auto-complete size=80
                               class="form-control"
                               ng-model="vmMapa.itemEndereco"
                               on-place-changed="vmMapa.selecionarEndereco()"  /> 
                    </div>
                    <div class="form-group  col-sm-2">
                        <label>&nbsp;</label>
                        <button class="btn btn-primary btn-block " ng-click="vmMapa.centralizarEndereco()">
                            <span class="fa fa-search" aria-hidden="true"></span>
                        </button>
                    </div>
                    <div class="form-group  col-sm-2">
                        <label>&nbsp;</label>
                        <button class="btn btn-primary btn-block" ng-click="vmMapa.limparPosicao()">
                            <span class="fa fa-unlink" aria-hidden="true"></span>
                        </button>
                    </div>
                </div>
            </div>
            <ng-map zoom="13" 
                    center="[{{vmMapa.lat}}, {{vmMapa.lng}}]" on-click="vmMapa.ajustaPosicao()">
                <marker ng-if="vmMapa.itemMarcador.Latitude && vmMapa.itemMarcador.Longitude" position="{{vmMapa.itemMarcador.Latitude}}, {{vmMapa.itemMarcador.Longitude}}"></marker>
            </ng-map>
        </div>
        <div class="modal-footer ">
            <button type="button" class="btn btn-primary  pull-right" ng-click="vmMapa.salvar()">
                <span class="fa fa-cloud-upload" aria-hidden="true"></span> @TextosPaginas.Geral_Salvar
            </button>
            <button type="button" class="btn btn-primary" ng-click="vmMapa.close()">
                <span class="fa fa-close" aria-hidden="true">@TextosPaginas.Cancelar</span>
            </button>
        </div>
    </script>
</section><!-- /.content -->